# ğŸ“¦ Claude TDD CLI å‘å¸ƒæŒ‡å—

æœ¬æ–‡æ¡£æè¿°äº† Claude TDD CLI é¡¹ç›®çš„å®Œæ•´å‘å¸ƒæµç¨‹ï¼ŒåŒ…æ‹¬ç‰ˆæœ¬ç®¡ç†ã€è‡ªåŠ¨åŒ–å‘å¸ƒå’Œæœ€ä½³å®è·µã€‚

## ğŸš€ å¿«é€Ÿå‘å¸ƒ

### æ–¹å¼ä¸€ï¼šGitHub Actions æ‰‹åŠ¨è§¦å‘ï¼ˆæ¨èï¼‰

1. **è®¿é—® GitHub Actions**
   ```
   https://github.com/MuziGeek/claude-tdd-cli/actions/workflows/release.yml
   ```

2. **ç‚¹å‡» "Run workflow"**
   - é€‰æ‹©åˆ†æ”¯ï¼š`main`
   - é€‰æ‹©ç‰ˆæœ¬ç±»å‹ï¼š
     - `patch` - ä¿®å¤ç‰ˆæœ¬ (0.2.4 â†’ 0.2.5)
     - `minor` - åŠŸèƒ½ç‰ˆæœ¬ (0.2.4 â†’ 0.3.0)
     - `major` - é‡å¤§ç‰ˆæœ¬ (0.2.4 â†’ 1.0.0)
     - `prerelease` - é¢„å‘å¸ƒç‰ˆæœ¬ (0.2.4 â†’ 0.2.5-beta.0)

3. **è‡ªåŠ¨åŒ–æµç¨‹æ‰§è¡Œ**
   - âœ… è¿è¡Œæµ‹è¯•å¥—ä»¶
   - âœ… æ„å»ºé¡¹ç›®
   - âœ… æ›´æ–°ç‰ˆæœ¬å·
   - âœ… åˆ›å»º Git æ ‡ç­¾
   - âœ… ç”Ÿæˆ Release Notes
   - âœ… åˆ›å»º GitHub Release
   - âœ… å‘å¸ƒåˆ° NPM

### æ–¹å¼äºŒï¼šGitHub Release é¡µé¢å‘å¸ƒ

1. **åˆ›å»º GitHub Release**
   - è®¿é—®ï¼šhttps://github.com/MuziGeek/claude-tdd-cli/releases/new
   - åˆ›å»ºæ–°æ ‡ç­¾ï¼š`v0.x.x`
   - å¡«å†™å‘å¸ƒè¯´æ˜
   - ç‚¹å‡» "Publish release"

2. **è‡ªåŠ¨è§¦å‘ NPM å‘å¸ƒ**
   - Release åˆ›å»ºåè‡ªåŠ¨è§¦å‘ NPM å‘å¸ƒæµç¨‹

## ğŸ”§ å‘å¸ƒå‰å‡†å¤‡

### 1. ç¯å¢ƒæ£€æŸ¥

```bash
# ç¡®ä¿åœ¨æ­£ç¡®çš„åˆ†æ”¯
git checkout main
git pull origin main

# æ£€æŸ¥å·¥ä½œç›®å½•å¹²å‡€
git status

# è¿è¡Œå®Œæ•´æµ‹è¯•
npm test

# æ£€æŸ¥æ„å»º
npm run build
```

### 2. ç‰ˆæœ¬å†³ç­–

æ ¹æ®å˜æ›´å†…å®¹é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ç±»å‹ï¼š

| å˜æ›´ç±»å‹ | ç‰ˆæœ¬ç±»å‹ | ç¤ºä¾‹ | è¯´æ˜ |
|---------|---------|------|------|
| ğŸ› Bugä¿®å¤ | `patch` | 0.2.4 â†’ 0.2.5 | å‘åå…¼å®¹çš„ä¿®å¤ |
| âœ¨ æ–°åŠŸèƒ½ | `minor` | 0.2.4 â†’ 0.3.0 | å‘åå…¼å®¹çš„åŠŸèƒ½ |
| ğŸ’¥ Breaking Changes | `major` | 0.2.4 â†’ 1.0.0 | ä¸å…¼å®¹çš„å˜æ›´ |
| ğŸ§ª é¢„å‘å¸ƒ | `prerelease` | 0.2.4 â†’ 0.2.5-beta.0 | æµ‹è¯•ç‰ˆæœ¬ |

### 3. æ›´æ–°æ–‡æ¡£

å‘å¸ƒå‰ç¡®ä¿ä»¥ä¸‹æ–‡æ¡£æ˜¯æœ€æ–°çš„ï¼š

- [ ] `README.md` - é¡¹ç›®ä»‹ç»å’Œä½¿ç”¨è¯´æ˜
- [ ] `CHANGELOG.md` - åœ¨ [æœªå‘å¸ƒ] åŒºåŸŸæ·»åŠ æ–°å˜æ›´
- [ ] `USAGE.md` - ä½¿ç”¨æŒ‡å—æ›´æ–°
- [ ] `examples/` - ç¤ºä¾‹é¡¹ç›®æ›´æ–°

## ğŸ“‹ å‘å¸ƒæ£€æŸ¥æ¸…å•

### å‘å¸ƒå‰æ£€æŸ¥
- [ ] æ‰€æœ‰ CI æµ‹è¯•é€šè¿‡
- [ ] ä»£ç å·²åˆå¹¶åˆ° `main` åˆ†æ”¯
- [ ] å·¥ä½œç›®å½•å¹²å‡€ï¼ˆæ— æœªæäº¤æ›´æ”¹ï¼‰
- [ ] CHANGELOG.md å·²æ›´æ–°
- [ ] ç‰ˆæœ¬å·å†³ç­–å·²ç¡®å®š
- [ ] NPM_TOKEN å¯†é’¥å·²é…ç½®

### å‘å¸ƒè¿‡ç¨‹æ£€æŸ¥
- [ ] GitHub Actions å·¥ä½œæµæˆåŠŸæ‰§è¡Œ
- [ ] æ–°ç‰ˆæœ¬æ ‡ç­¾å·²åˆ›å»º
- [ ] GitHub Release å·²åˆ›å»º
- [ ] NPM åŒ…å·²å‘å¸ƒ
- [ ] Release Notes å·²ç”Ÿæˆ

### å‘å¸ƒåéªŒè¯
- [ ] NPM åŒ…å¯æ­£å¸¸å®‰è£…ï¼š`npm install -g claude-tdd-cli@latest`
- [ ] CLI å‘½ä»¤æ­£å¸¸å·¥ä½œï¼š`claude-tdd --version`
- [ ] GitHub Release é¡µé¢æ˜¾ç¤ºæ­£å¸¸
- [ ] æ–‡æ¡£é“¾æ¥æ­£ç¡®ä¸”å¯è®¿é—®

## ğŸ”‘ å¯†é’¥é…ç½®

### NPM_TOKEN è®¾ç½®

1. **è·å– NPM Token**
   ```bash
   npm login
   npm token create --read-only  # æˆ– --publish ç”¨äºå‘å¸ƒ
   ```

2. **åœ¨ GitHub ä¸­æ·»åŠ  Secret**
   - è®¿é—®ï¼šSettings â†’ Secrets and variables â†’ Actions
   - æ·»åŠ æ–° Secretï¼š`NPM_TOKEN`
   - ç²˜è´´ä» NPM è·å–çš„ token

3. **éªŒè¯é…ç½®**
   ```bash
   # æµ‹è¯• token æ˜¯å¦æœ‰æ•ˆ
   curl -H "Authorization: Bearer YOUR_TOKEN" https://registry.npmjs.org/-/whoami
   ```

### GitHub Token æƒé™

ç¡®ä¿ `GITHUB_TOKEN` å…·æœ‰ä»¥ä¸‹æƒé™ï¼š
- `contents: write` - åˆ›å»ºæ ‡ç­¾å’Œæäº¤
- `packages: write` - å‘å¸ƒåŒ…ï¼ˆå¦‚æœä½¿ç”¨ GPRï¼‰
- `actions: read` - è¯»å– Actions çŠ¶æ€

## ğŸ“Š ç‰ˆæœ¬ç®¡ç†ç­–ç•¥

### åˆ†æ”¯ç­–ç•¥

```
main (ç”Ÿäº§)     â†â”€â”€ å‘å¸ƒåˆ†æ”¯ï¼Œä¿æŒç¨³å®š
  â†‘
develop (å¼€å‘)  â†â”€â”€ å¼€å‘åˆ†æ”¯ï¼Œåˆå¹¶æ–°åŠŸèƒ½
  â†‘
feature/*       â†â”€â”€ åŠŸèƒ½åˆ†æ”¯
hotfix/*        â†â”€â”€ ç´§æ€¥ä¿®å¤åˆ†æ”¯
```

### å‘å¸ƒèŠ‚å¥

- **ä¸»ç‰ˆæœ¬** (Major): é‡å¤§æ¶æ„å˜æ›´ï¼Œæ¯å¹´1-2æ¬¡
- **æ¬¡ç‰ˆæœ¬** (Minor): æ–°åŠŸèƒ½å‘å¸ƒï¼Œæ¯æœˆ1-2æ¬¡  
- **ä¿®è®¢ç‰ˆæœ¬** (Patch): ç´§æ€¥ä¿®å¤ï¼ŒæŒ‰éœ€å‘å¸ƒ
- **é¢„å‘å¸ƒç‰ˆæœ¬**: æµ‹è¯•æ–°åŠŸèƒ½ï¼ŒæŒç»­å‘å¸ƒ

### ç‰ˆæœ¬å‘½åè§„èŒƒ

```
v{MAJOR}.{MINOR}.{PATCH}[-{PRERELEASE}]

ç¤ºä¾‹ï¼š
v1.0.0          # æ­£å¼ç‰ˆæœ¬
v1.0.1-beta.1   # é¢„å‘å¸ƒç‰ˆæœ¬
v1.0.1-alpha.2  # Alpha ç‰ˆæœ¬
v1.0.1-rc.1     # Release Candidate
```

## ğŸ”„ å‘å¸ƒæµç¨‹è¯¦è§£

### è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹

```mermaid
graph TD
    A[è§¦å‘å‘å¸ƒ] --> B[è¿è¡Œæµ‹è¯•]
    B --> C[æ„å»ºé¡¹ç›®]
    C --> D[æ›´æ–°ç‰ˆæœ¬]
    D --> E[åˆ›å»ºæ ‡ç­¾]
    E --> F[ç”ŸæˆRelease Notes]
    F --> G[åˆ›å»ºGitHub Release]
    G --> H[å‘å¸ƒåˆ°NPM]
    H --> I[å‘å¸ƒå®Œæˆ]
    
    B -->|å¤±è´¥| J[åœæ­¢å‘å¸ƒ]
    C -->|å¤±è´¥| J
    H -->|å¤±è´¥| K[å›æ»šæ ‡ç­¾]
```

### Release Notes è‡ªåŠ¨ç”Ÿæˆ

å·¥ä½œæµä¼šè‡ªåŠ¨ä» Git æäº¤å†å²ç”Ÿæˆ Release Notesï¼š

```bash
# åŠŸèƒ½å˜æ›´ (feat/feature)
- feat: æ·»åŠ æ–°çš„åˆå§‹åŒ–æ¨¡æ¿
- feature: æ”¯æŒ Rust æ¡†æ¶

# ä¿®å¤ (fix/bugfix)  
- fix: ä¿®å¤ Windows è·¯å¾„é—®é¢˜
- bugfix: è§£å†³æµ‹è¯•è¦†ç›–ç‡è®¡ç®—é”™è¯¯

# æ–‡æ¡£ (docs/documentation)
- docs: æ›´æ–° API æ–‡æ¡£
- documentation: æ·»åŠ ä½¿ç”¨ç¤ºä¾‹

# å…¶ä»–æ”¹è¿› (chore/refactor/style)
- chore: å‡çº§ä¾èµ–ç‰ˆæœ¬
- refactor: é‡æ„æ ¸å¿ƒæ¨¡å—
- style: ä»£ç æ ¼å¼åŒ–
```

## ğŸš¨ æ•…éšœå¤„ç†

### å‘å¸ƒå¤±è´¥å¤„ç†

1. **æµ‹è¯•å¤±è´¥**
   ```bash
   # ä¿®å¤æµ‹è¯•åé‡æ–°è§¦å‘
   npm test
   git add .
   git commit -m "fix: ä¿®å¤æµ‹è¯•é—®é¢˜"
   git push
   ```

2. **æ„å»ºå¤±è´¥**
   ```bash
   # æ£€æŸ¥æ„å»ºé”™è¯¯
   npm run build
   # ä¿®å¤é—®é¢˜åé‡æ–°å‘å¸ƒ
   ```

3. **NPM å‘å¸ƒå¤±è´¥**
   ```bash
   # æ£€æŸ¥ NPM token æ˜¯å¦æœ‰æ•ˆ
   npm whoami
   
   # æ‰‹åŠ¨å‘å¸ƒ
   npm publish --access public
   ```

### å›æ»šå‘å¸ƒ

å¦‚æœå‘å¸ƒåå‘ç°ä¸¥é‡é—®é¢˜ï¼š

1. **NPM åŒ…å›æ»š**
   ```bash
   # æ’¤é”€å‘å¸ƒï¼ˆä»…é™å‘å¸ƒå24å°æ—¶å†…ï¼‰
   npm unpublish claude-tdd-cli@0.x.x
   
   # æˆ–è€…å‘å¸ƒä¿®å¤ç‰ˆæœ¬
   npm version patch
   npm publish
   ```

2. **GitHub Release å›æ»š**
   - åˆ é™¤é—®é¢˜ç‰ˆæœ¬çš„ GitHub Release
   - åˆ é™¤å¯¹åº”çš„ Git æ ‡ç­¾
   ```bash
   git tag -d v0.x.x
   git push origin --delete v0.x.x
   ```

3. **é€šä¿¡ç”¨æˆ·**
   - åœ¨ GitHub Issues ä¸­å‘å¸ƒå…¬å‘Š
   - æ›´æ–° README ä¸­çš„å·²çŸ¥é—®é¢˜

## ğŸ“ˆ å‘å¸ƒåä»»åŠ¡

### 1. éªŒè¯å‘å¸ƒ

```bash
# å…¨å±€å®‰è£…æœ€æ–°ç‰ˆæœ¬
npm install -g claude-tdd-cli@latest

# éªŒè¯ç‰ˆæœ¬
claude-tdd --version

# æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½
claude-tdd doctor
claude-tdd init --help
```

### 2. æ›´æ–°æ–‡æ¡£

- æ›´æ–°é¡¹ç›®ç½‘ç«™ï¼ˆå¦‚æœ‰ï¼‰
- å‘å¸ƒåšå®¢æ–‡ç« æˆ–æ›´æ–°æ—¥å¿—
- æ›´æ–°ç¤¾äº¤åª’ä½“

### 3. ç›‘æ§å’Œåé¦ˆ

- ç›‘æ§ NPM ä¸‹è½½é‡
- å…³æ³¨ GitHub Issues ä¸­çš„é—®é¢˜æŠ¥å‘Š
- æ”¶é›†ç”¨æˆ·åé¦ˆ

### 4. å‡†å¤‡ä¸‹ä¸ªç‰ˆæœ¬

- å°† CHANGELOG.md ä¸­çš„ [æœªå‘å¸ƒ] å†…å®¹ç§»åŠ¨åˆ°æ–°ç‰ˆæœ¬
- åˆ›å»ºä¸‹ä¸ªç‰ˆæœ¬çš„ milestone
- è§„åˆ’æ–°åŠŸèƒ½å’Œæ”¹è¿›

## ğŸ“ è”ç³»å’Œæ”¯æŒ

- **é¡¹ç›®ä¸»é¡µ**: https://github.com/MuziGeek/claude-tdd-cli
- **é—®é¢˜æŠ¥å‘Š**: https://github.com/MuziGeek/claude-tdd-cli/issues
- **åŠŸèƒ½è¯·æ±‚**: https://github.com/MuziGeek/claude-tdd-cli/discussions
- **é‚®ç®±**: mz@easymuzi.cn

---

**æœ€åæ›´æ–°**: 2025-09-08  
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0